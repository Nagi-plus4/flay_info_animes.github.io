<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>One Piece</title>
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet"/>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet"/>
  <link href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css" rel="stylesheet"/>
  <style>
    body {
      background-color: #000;
      color: #fff;
      font-family: Arial, sans-serif;
      background-image: url('https://media.themoviedb.org/t/p/w780/2rmK7mnchw9Xr3XdiTFSxTTLXqv.jpg');
      background-size: cover;
      background-position: center;
      background-attachment: fixed;
      overflow-x: hidden;
      margin: 0;
      padding: 0;
    }
    .overlay {
      background-color: rgba(0, 0, 0, 0.8);
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
    }
    .container-fluid {
      position: relative;
      padding: 20px;
    }
    .video-section {
      width: 100%;
      height: 315px;
      background: #000;
      border-radius: 10px;
      overflow: hidden;
      margin-bottom: 20px;
    }
    iframe {
      width: 100%;
      height: 100%;
      border: none;
    }
    .description {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin: 20px 0;
    }
    .icons {
      display: flex;
      gap: 10px;
    }
    .icon {
      font-size: 1.5em;
      cursor: pointer;
      transition: color 0.3s;
    }
    .icon:hover {
      color: #ff0000;
    }
    .season-select {
      background-color: #222;
      color: #fff;
      border: 2px solid #555;
      border-radius: 5px;
      padding: 10px 25px;
      appearance: none;
      background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" fill="%23fff" viewBox="0 0 24 24"><path d="M7 10l5 5 5-5z"/></svg>');
      background-repeat: no-repeat;
      background-position: right 10px top 50%;
      background-size: 12px;
    }
    .episodes {
      display: flex;
      overflow-x: auto;
      padding-bottom: 10px;
      scrollbar-width: thin;
      scrollbar-color: #333 #111;
      margin-bottom: 20px;
    }
    .episodes::-webkit-scrollbar {
      height: 8px;
    }
    .episodes::-webkit-scrollbar-thumb {
      background: #333;
      border-radius: 10px;
    }
    .episode-button {
      flex: 0 0 auto;
      margin: 5px;
      padding: 15px;
      width: 60px;
      height: 60px;
      background: linear-gradient(135deg, #555, #333);
      color: white;
      font-size: 1em;
      border-radius: 0px;
      cursor: pointer;
      border: none;
      outline: none;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
      transition: all 0.3s ease;
    }
    .episode-button.active {
      background: linear-gradient(135deg, #ff4b2b, #ff416c);
      transform: scale(1.1);
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);
    }
    .synopsis {
      margin: 20px 0;
    }
    *:focus {
      outline: none !important;
    }
  </style>
</head>
<body>
  <div class="overlay"></div>
  <div class="container-fluid">
    <div class="video-section">
      <iframe id="video-iframe" src="https://gineshm.github.io/cinelatmobile.github.io/beta.html?link=https://serverbankai.xyz/mantequilla/cerezo/monaschinas/juanpisa/latino/t1/1.mp4&titulo=➟One%20Piece%20%20:(T1%20-%20E1)&tiempo=125" allowfullscreen></iframe>

    </div>

    <div class="description">
      <h1 id="series-title">One Piece</h1>
      <div class="icons">
        <i class="fas fa-expand icon" onclick="toggleFullScreen()" title="Pantalla Completa"></i>
        <i class="fas fa-download icon" onclick="downloadSeries()" title="Descargar Serie"></i>
      </div>
    </div>

    <div class="season-info d-flex justify-content-between align-items-center mb-2">
      <select id="season-select" class="season-select" onchange="changeSeason(this.value)">
        <option value="1">East Blue</option>
        <option value="2">Entrando en la Grand Line</option>
        <option value="3">Presentando a Chopper en la Isla de Invierno</option>
        <option value="4">Llegada & Feroces Combates en Arabasta</option>
        <option value="5">¡Sueños!, ¡La salida de la tripulación pirata de Zenny!, Más allá del arcoíris</option>
        <option value="6">Isla del Cielo ~ Skypiea & la Campana Dorada</option>
        <option value="7">¡Escape! La Fortaleza Marina & la Tripulación Pirata de Foxy</option>
        <option value="8">Water Seven</option>
        <option value="9">Enies Lobby</option>
        <option value="10">Thriller Bark</option>
        <option value="11">abaody Archipelago</option>
        <option value="12">Isla de las Mujeres</option>
        <option value="13">Impel Down</option>
        <option value="14">Marineford</option>
        <option value="15">Isla Gyojin</option>
        <option value="16">Punk Hazard</option>
        <option value="17">Dressrosa</option>
        <option value="18">Zou</option>
        <option value="19">Isla Whole Cake</option>
        <option value="20">Pais de Wano</option>
        <option value="21">Isla Egghead</option>
        
      </select>
      <span>Actualizado hasta el 1</span>
    </div>

    <div class="episodes" id="episodes-container"></div>

    <div class="synopsis">
      <h2>Sinopsis</h2>
      <p id="synopsis-text">
        Riqueza, fama, poder... un hombre había obtenido todo en este mundo, era el Rey de los Piratas Gold Roger. Antes de morir sus últimas palabras inspiraron al mundo a aventurarse al mar: "¿Mi tesoro? Si lo queréis es vuestro... lo he escondido todo en ese lugar". Y así dio comienzo lo que se conoce como la Gran Era de la Piratería, lanzando a cientos de piratas al mar para encontrar el gran tesoro One Piece. Esta serie relata las aventuras y desventuras de uno de esos piratas, Monkey D. Luffy, quien accidentalmente de pequeño, comió una Fruta del Diablo (Akuma no Mi en japonés), en particular una Gomu Gomu no Mi que hizo que su cuerpo ganara las propiedades físicas de la goma, convirtiéndose en el hombre de goma. Luffy, después de dicho suceso, decide que se convertirá en el próximo Rey de los Piratas y para ello, deberá encontrar el "One Piece".
      </p>
      <button id="toggle-button" class="btn btn-link text-light p-0">Ver más</button>
    </div>
  </div>

  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script>
    const seasons = {
      1: [
        'https://gineshm.github.io/cinelatmobile.github.io/beta.html?link=https://serverbankai.xyz/mantequilla/cerezo/monaschinas/juanpisa/latino/t1/1.mp4&titulo=➟One%20Piece%20%20:(T1%20-%20E1)&tiempo=125', 
        
        '',
        
        '',
        
        '',
        
        '',
        
        '',
        
                
      ]
    };

    const episodesContainer = document.getElementById('episodes-container');
    const videoIframe = document.getElementById('video-iframe');
    const seasonSelect = document.getElementById('season-select');
    const seriesTitle = document.getElementById('series-title').textContent.trim().replace(/\s+/g, '_');

    function changeSeason(seasonNumber) {
      episodesContainer.innerHTML = '';
      const videoURLs = seasons[seasonNumber];

      videoURLs.forEach((videoURL, index) => {
        const button = document.createElement('button');
        button.className = 'episode-button';
        button.textContent = index + 1;

        button.addEventListener('click', function () {
          document.querySelectorAll('.episode-button').forEach(btn => btn.classList.remove('active'));
          this.classList.add('active');
          videoIframe.src = videoURL;
          this.blur();
          localStorage.setItem(`${seriesTitle}_ultimoEpisodio`, index);
          localStorage.setItem(`${seriesTitle}_ultimaTemporada`, seasonNumber);
        });

        episodesContainer.appendChild(button);
      });

      const ultimoEpisodio = localStorage.getItem(`${seriesTitle}_ultimoEpisodio`);
      const ultimaTemporada = localStorage.getItem(`${seriesTitle}_ultimaTemporada`);

      if (ultimoEpisodio !== null && `${seasonNumber}` === ultimaTemporada) {
        const btn = document.querySelectorAll('.episode-button')[ultimoEpisodio];
        if (btn) btn.click();
      }

      localStorage.setItem(`${seriesTitle}_ultimaTemporadaSeleccionada`, seasonNumber);
    }

    const synopsisText = document.getElementById('synopsis-text');
    const toggleButton = document.getElementById('toggle-button');
    const fullText = synopsisText.textContent;
    const truncatedText = fullText.substring(0, 100) + '...';
    synopsisText.textContent = truncatedText;

    toggleButton.addEventListener('click', function () {
      if (toggleButton.textContent === 'Ver más') {
        synopsisText.textContent = fullText;
        toggleButton.textContent = 'Ver menos';
      } else {
        synopsisText.textContent = truncatedText;
        toggleButton.textContent = 'Ver más';
      }
    });

    function toggleFullScreen() {
      if (videoIframe.requestFullscreen) {
        videoIframe.requestFullscreen();
      } else if (videoIframe.mozRequestFullScreen) {
        videoIframe.mozRequestFullScreen();
      } else if (videoIframe.webkitRequestFullscreen) {
        videoIframe.webkitRequestFullscreen();
      } else if (videoIframe.msRequestFullscreen) {
        videoIframe.msRequestFullscreen();
      }
      Swal.fire({
        icon: 'info',
        title: 'Pantalla Completa',
        text: 'El modo de pantalla completa ha sido activado.'
      });
    }

    function downloadSeries() {
      Swal.fire({
        title: 'Descargar Episodio',
        text: 'Selecciona un servidor de Descarga:',
        input: 'select',
        inputOptions: {
          0: 'Opción 1',
          1: 'transmitir TV',
        },
        inputPlaceholder: 'Selecciona servidor de Descarga',
        showCancelButton: true,
        inputValidator: (value) => {
          return new Promise((resolve) => {
            if (value) {
              const downloadLinks = [
                'LINK_DESCARGA_1',
                'wvc-x-callback://open?url=https://wishonly.site/e/4gc3yropn53i',
                'LINK_DESCARGA_3'
              ];
              window.location.href = downloadLinks[value];
              resolve();
            } else {
              resolve('Debes seleccionar un episodio');
            }
          });
        }
      });
    }

    const lastSeason = localStorage.getItem(`${seriesTitle}_ultimaTemporadaSeleccionada`) || 1;
    seasonSelect.value = lastSeason;
    changeSeason(lastSeason);
  </script>
</body>
</html>
